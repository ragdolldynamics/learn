
<!doctype html>
<html lang="en" class="no-js">
  <head>
    

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Comparison of omx with cmdx, the Maya API wrapper used by Ragdoll">
      
      
      
        <meta name="author" content="mottosso">
      
      
        <link rel="canonical" href="https://learn.ragdolldynamics.com/blog/20240101_omx_vs_cmdx/">
      
      <link rel="icon" href="../../favicon-256x256.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-7.3.6">
    
<link href="https://fonts.googleapis.com/css?family=Roboto:400,500|Source+Code+Pro" rel="stylesheet">

    
      
        <title>cmdx v omx - Learn Ragdoll</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="white">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cmdx-v-omx" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Learn Ragdoll" class="md-header__button md-logo" aria-label="Learn Ragdoll" data-md-component="logo">
      
  <img src="../../ragdoll_silhouette_black_512.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Learn Ragdoll
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              cmdx v omx
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/mottosso/ragdoll" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mottosso/ragdoll
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Learn Ragdoll" class="md-nav__button md-logo" aria-label="Learn Ragdoll" data-md-component="logo">
      
  <img src="../../ragdoll_silhouette_black_512.png" alt="logo">

    </a>
    Learn Ragdoll
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/mottosso/ragdoll" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mottosso/ragdoll
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        

        Home
      </a>
    </li>
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        

        Overview
      </a>
    </li>
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  

    <!-- Determine whether to render item as a section -->
    

    <!-- Render item with nested items -->
    <li class="md-nav__item md-nav__item--nested">

      <!-- Active checkbox expands items contained within nested section -->
      
      
        <input
          class="md-nav__toggle md-toggle"
          data-md-toggle="__nav_3"
          type="checkbox"
          id="__nav_3"
          
        />
      

      <!-- Expand active pages -->
      <label class="md-nav__link" for="__nav_3">
        Documentation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav
        class="md-nav"
        aria-label="Documentation"
        data-md-level="1"
      >
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>

          <!-- Render nested item list -->
          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/marker/" class="md-nav__link">
        
        <img src="/icons/marker_black.png">
        

        Marker
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/group/" class="md-nav__link">
        
        <img src="/icons/ragdoll_black.png">
        

        Group
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/solver/" class="md-nav__link">
        
        <img src="/icons/solver_black.png">
        

        Solver
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/environment/" class="md-nav__link">
        
        <img src="/icons/environment_black.png">
        

        Environment
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/manipulator/" class="md-nav__link">
        
        <img src="/icons/manipulator_black.png">
        

        Manipulator
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/live_mode/" class="md-nav__link">
        
        <img src="/icons/magnet_black.png">
        

        Live Mode
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/locomotion/" class="md-nav__link">
        
        <img src="/icons/plan_black.png">
        

        Locomotion
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/constraints/" class="md-nav__link">
        
        <img src="/icons/constraint_black.png">
        

        Constraints
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/fields/" class="md-nav__link">
        
        <img src="/icons/force_black.png">
        

        Fields
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/import_physics/" class="md-nav__link">
        
        <img src="/icons/save_black.png">
        

        Import Physics
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/record_simulation/" class="md-nav__link">
        
        <img src="/icons/record_black.png">
        

        Record Simulation
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/snap_to_simulation/" class="md-nav__link">
        
        <img src="/icons/snap_black.png">
        

        Snap to Simulation
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/retargeting/" class="md-nav__link">
        
        <img src="/icons/retarget_black.png">
        

        Retargeting
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/level_of_detail/" class="md-nav__link">
        
        <img src="/icons/hair2_black.png">
        

        Level Of Detail
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/cache/" class="md-nav__link">
        
        <img src="/icons/bake_black.png">
        

        Cache
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/link/" class="md-nav__link">
        
        <img src="/icons/link_black.png">
        

        Link
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../documentation/utilities/" class="md-nav__link">
        
        <img src="/icons/replace_black.png">
        

        Utilities
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>

  <!-- Currently active page -->
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  

    <!-- Determine whether to render item as a section -->
    

    <!-- Render item with nested items -->
    <li class="md-nav__item md-nav__item--nested">

      <!-- Active checkbox expands items contained within nested section -->
      
      
        <input
          class="md-nav__toggle md-toggle"
          data-md-toggle="__nav_4"
          type="checkbox"
          id="__nav_4"
          
        />
      

      <!-- Expand active pages -->
      <label class="md-nav__link" for="__nav_4">
        Tutorials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav
        class="md-nav"
        aria-label="Tutorials"
        data-md-level="1"
      >
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>

          <!-- Render nested item list -->
          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/videos/" class="md-nav__link">
        
        <img src="/icons/camera_black.png">
        

        Videos
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/manikin/" class="md-nav__link">
        
        <img src="/icons/ragdoll_black.png">
        

        Manikin
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/manikin_ragdoll/" class="md-nav__link">
        
        <img src="/icons/ragdoll_black.png">
        

        Full Ragdoll
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/manikin_ik/" class="md-nav__link">
        
        <img src="/icons/chain_black.png">
        

        Inverse Kinematics
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/mocap_chap/" class="md-nav__link">
        
        <img src="/icons/mocap_black.png">
        

        Mocap Chap
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/rookie_wasp/" class="md-nav__link">
        
        <img src="/icons/wasp_black.png">
        

        Rookie Wasp
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/ragdog/" class="md-nav__link">
        
        <img src="/icons/bone_black.png">
        

        Ragdog
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/cloth_emulation/" class="md-nav__link">
        
        <img src="/icons/cloth_black.png">
        

        Cloth Emulation
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/self_walking/" class="md-nav__link">
        
        <img src="/icons/control_black.png">
        

        Self Walking
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../tutorials/bouncing_ball/" class="md-nav__link">
        
        <img src="/icons/physics_black.png">
        

        Bouncing Ball
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>

  <!-- Currently active page -->
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../download/" class="md-nav__link">
        

        Download
      </a>
    </li>
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../menu/" class="md-nav__link">
        

        Menu Reference
      </a>
    </li>
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        

        API Reference
      </a>
    </li>
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../licencing/" class="md-nav__link">
        

        Licencing
      </a>
    </li>
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../serialisation/" class="md-nav__link">
        

        Serialisation
      </a>
    </li>
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  

    <!-- Determine whether to render item as a section -->
    

    <!-- Render item with nested items -->
    <li class="md-nav__item md-nav__item--nested">

      <!-- Active checkbox expands items contained within nested section -->
      
      
        <input
          class="md-nav__toggle md-toggle"
          data-md-toggle="__nav_10"
          type="checkbox"
          id="__nav_10"
          
        />
      

      <!-- Expand active pages -->
      <label class="md-nav__link" for="__nav_10">
        News
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav
        class="md-nav"
        aria-label="News"
        data-md-level="1"
      >
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          News
        </label>
        <ul class="md-nav__list" data-md-scrollfix>

          <!-- Render nested item list -->
          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2023.10.03/" class="md-nav__link">
        

        2023.10.03
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2023.04.01/" class="md-nav__link">
        

        2023.04.01
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.11.29/" class="md-nav__link">
        

        2022.11.29
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.07.20/" class="md-nav__link">
        

        2022.07.20
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.06.15/" class="md-nav__link">
        

        2022.06.15
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.06.09/" class="md-nav__link">
        

        2022.06.09
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.05.04/" class="md-nav__link">
        

        2022.05.04
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.03.14/" class="md-nav__link">
        

        2022.03.14
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.02.28/" class="md-nav__link">
        

        2022.02.28
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.02.14/" class="md-nav__link">
        

        2022.02.14
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.02.01/" class="md-nav__link">
        

        2022.02.01
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.01.21/" class="md-nav__link">
        

        2022.01.21
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2022.01.17/" class="md-nav__link">
        

        2022.01.17
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.12.15/" class="md-nav__link">
        

        2021.12.15
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.12.12/" class="md-nav__link">
        

        2021.12.12
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.11.15/" class="md-nav__link">
        

        2021.11.15
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.10.25/" class="md-nav__link">
        

        2021.10.25
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.10.07/" class="md-nav__link">
        

        2021.10.07
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.09.27/" class="md-nav__link">
        

        2021.09.27
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.08.28/" class="md-nav__link">
        

        2021.08.28
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.08.06/" class="md-nav__link">
        

        2021.08.06
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.07.27/" class="md-nav__link">
        

        2021.07.27
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.07.15/" class="md-nav__link">
        

        2021.07.15
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.07.02/" class="md-nav__link">
        

        2021.07.02
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.06.10/" class="md-nav__link">
        

        2021.06.10
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.06.07/" class="md-nav__link">
        

        2021.06.07
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.05.17/" class="md-nav__link">
        

        2021.05.17
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.05.10/" class="md-nav__link">
        

        2021.05.10
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.04.28/" class="md-nav__link">
        

        2021.04.28
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.04.23/" class="md-nav__link">
        

        2021.04.23
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.04.11/" class="md-nav__link">
        

        2021.04.11
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.03.25/" class="md-nav__link">
        

        2021.03.25
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.03.23/" class="md-nav__link">
        

        2021.03.23
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.03.11/" class="md-nav__link">
        

        2021.03.11
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.03.04/" class="md-nav__link">
        

        2021.03.04
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.03.01/" class="md-nav__link">
        

        2021.03.01
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.02.07/" class="md-nav__link">
        

        2021.02.07
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.01.27/" class="md-nav__link">
        

        2021.01.27
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.01.17/" class="md-nav__link">
        

        2021.01.17
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.01.15/" class="md-nav__link">
        

        2021.01.15
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.01.14/" class="md-nav__link">
        

        2021.01.14
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2021.01.04/" class="md-nav__link">
        

        2021.01.04
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.12.18/" class="md-nav__link">
        

        2020.12.18
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.12.07/" class="md-nav__link">
        

        2020.12.07
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.12.01/" class="md-nav__link">
        

        2020.12.01
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.11.24/" class="md-nav__link">
        

        2020.11.24
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.11.23/" class="md-nav__link">
        

        2020.11.23
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.11.22/" class="md-nav__link">
        

        2020.11.22
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.11.17/" class="md-nav__link">
        

        2020.11.17
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.11.16/" class="md-nav__link">
        

        2020.11.16
      </a>
    </li>
  

          
            

  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../releases/2020.11.10/" class="md-nav__link">
        

        2020.11.10
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>

  <!-- Currently active page -->
  

    
      
      
      <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Wrap everything with a macro to reduce file roundtrips (see #2213) -->


<!-- Render current and nested navigation items -->


  <!-- Determine class according to state -->
  
  

  <!-- Main navigation item with nested items -->
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        

        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cmdx-v-omx" class="md-nav__link">
    cmdx v omx
  </a>
  
    <nav class="md-nav" aria-label="cmdx v omx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#first-impressions" class="md-nav__link">
    First Impressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    Performance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deep-dive" class="md-nav__link">
    Deep Dive
  </a>
  
    <nav class="md-nav" aria-label="Deep Dive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undo" class="md-nav__link">
    Undo
  </a>
  
    <nav class="md-nav" aria-label="Undo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#undo-primer" class="md-nav__link">
    Undo Primer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifier-primer" class="md-nav__link">
    Modifier Primer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifiers" class="md-nav__link">
    Modifiers
  </a>
  
    <nav class="md-nav" aria-label="Modifiers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blessing" class="md-nav__link">
    Blessing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#curse" class="md-nav__link">
    Curse
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#silently-adding-duplicate-attributes" class="md-nav__link">
    Silently adding duplicate attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interoperability-with-non-modifiers" class="md-nav__link">
    Interoperability with non-modifiers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#armour" class="md-nav__link">
    Armour
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison" class="md-nav__link">
    Comparison
  </a>
  
    <nav class="md-nav" aria-label="Comparison">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mdgmodifier" class="md-nav__link">
    MDGModifier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mpxcommand" class="md-nav__link">
    MPxCommand
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#omx-and-the-current-modifier" class="md-nav__link">
    omx and the "Current Modifier"
  </a>
  
    <nav class="md-nav" aria-label="omx and the "Current Modifier"">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xmodifier-implementation" class="md-nav__link">
    XModifier Implementation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extras" class="md-nav__link">
    Extras
  </a>
  
    <nav class="md-nav" aria-label="Extras">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commandtoexecute" class="md-nav__link">
    commandToExecute
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#animation" class="md-nav__link">
    Animation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#units" class="md-nav__link">
    Units
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#math" class="md-nav__link">
    Math
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pep8" class="md-nav__link">
    PEP8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-curves" class="md-nav__link">
    Generate Curves
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmdc" class="md-nav__link">
    cmdc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more" class="md-nav__link">
    More
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feedback" class="md-nav__link">
    Feedback
  </a>
  
    <nav class="md-nav" aria-label="Feedback">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#try-it" class="md-nav__link">
    Try it
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-more" class="md-nav__link">
    Read more
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              

                
                  <a href="https://github.com/mottosso/ragdoll/edit/main/docs/pages/blog/20240101_omx_vs_cmdx.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>cmdx v omx</h1>
                
                <p><img alt="image.png" src="https://content.ragdolldynamics.com/3f00363e-4576-49c6-bd50-b3998f18bf48.png" /></p>
<h2 id="cmdx-v-omx">cmdx v omx</h2>
<p>The <a href="https://animallogic.com/animal-logic/news/omx-release/">appearance of <code>omx</code></a> gave me an excellent opportunity to shed some light on the Maya API and how undo works, along with finding some inspiration for things to improve in <code>cmdx</code>.</p>
<p>Let's go!</p>
<p><br></p>
<h3 id="first-impressions">First Impressions</h3>
<p>Let's start with a quick side-by-side.</p>
<p><strong>omx</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">omx</span>
<span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om2</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">currentModifier</span><span class="p">()</span>
<span class="n">joint</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;joint&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;joint&quot;</span><span class="p">)</span>

<span class="n">fn</span> <span class="o">=</span> <span class="n">om2</span><span class="o">.</span><span class="n">MFnNumericAttribute</span><span class="p">()</span>
<span class="n">attr</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;flash&quot;</span><span class="p">,</span> <span class="s2">&quot;flash&quot;</span><span class="p">,</span>
                 <span class="n">om2</span><span class="o">.</span><span class="n">MFnNumericData</span><span class="o">.</span><span class="n">kInt</span><span class="p">)</span>
<span class="n">fn</span><span class="o">.</span><span class="n">setMin</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">fn</span><span class="o">.</span><span class="n">setMax</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">mod</span><span class="o">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="n">joint</span><span class="o">.</span><span class="n">object</span><span class="p">(),</span> <span class="n">attr</span><span class="p">)</span>

<span class="n">joint</span><span class="o">.</span><span class="n">radius</span><span class="o">.</span><span class="n">setFloat</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">joint</span><span class="o">.</span><span class="n">translate</span><span class="o">.</span><span class="n">setCompoundDouble</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">mod</span><span class="o">.</span><span class="n">commandToExecute</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;setKeyframe -at tx -t 1 -v 10 </span><span class="si">{</span><span class="n">joint</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">commandToExecute</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;setKeyframe -at tx -t 5 -v 15 </span><span class="si">{</span><span class="n">joint</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">commandToExecute</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;setKeyframe -at tx -t 10 -v 10 </span><span class="si">{</span><span class="n">joint</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="p">)</span>

<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>
</code></pre></div>
<p><strong>cmdx</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">cmdx</span>

<span class="k">with</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span> <span class="k">as</span> <span class="n">mod</span><span class="p">:</span>
    <span class="n">joint</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;joint&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;joint&quot;</span><span class="p">)</span>
    <span class="n">attr</span> <span class="o">=</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="s2">&quot;flash&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">addAttr</span><span class="p">(</span><span class="n">joint</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="s2">&quot;radius&quot;</span><span class="p">],</span> <span class="mf">1.5</span><span class="p">)</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="s2">&quot;translate&quot;</span><span class="p">],</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="s2">&quot;tx&quot;</span><span class="p">],</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
        <span class="mi">10</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">})</span>
</code></pre></div>
<p><strong>Highlights</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Feature</th>
<th style="text-align: left;">omx</th>
<th style="text-align: left;">cmdx</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Maya Support</td>
<td style="text-align: left;">2022-2024</td>
<td style="text-align: left;">2016-2024</td>
</tr>
<tr>
<td style="text-align: left;">Attribute Access</td>
<td style="text-align: left;">Dot-access, <code>.attr</code></td>
<td style="text-align: left;">Dict-access, <code>["attr"]</code></td>
</tr>
<tr>
<td style="text-align: left;">Attribute Setter</td>
<td style="text-align: left;"><code>node.attr.setInt(5)</code></td>
<td style="text-align: left;"><code>node["attr"] = 5</code></td>
</tr>
<tr>
<td style="text-align: left;">Attribute Getter</td>
<td style="text-align: left;"><code>if node.attr</code></td>
<td style="text-align: left;"><code>if node["attr"]</code></td>
</tr>
<tr>
<td style="text-align: left;">Animation</td>
<td style="text-align: left;"><code>mod.commandToExecute</code></td>
<td style="text-align: left;"><code>mod.setAttr</code></td>
</tr>
<tr>
<td style="text-align: left;">Undo</td>
<td style="text-align: left;"><code>MPxCommand</code> + <code>MDGModifier</code></td>
<td style="text-align: left;">Same</td>
</tr>
</tbody>
</table>
<p><br></p>
<h3 id="performance">Performance</h3>
<p>Both omx and cmdx performs better than cmds, PyMEL and MEL. They also all scale linearly with the number of nodes, so let's see how they compare on the heaviest of cases.</p>
<p><strong>10,000 nodes</strong></p>
<p>Units are in seconds.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Test</th>
<th style="text-align: left;">cmds</th>
<th style="text-align: left;">cmdx</th>
<th style="text-align: left;">cmdx noundo</th>
<th style="text-align: left;">omx</th>
<th style="text-align: left;">omx immediate</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Create</td>
<td style="text-align: left;">5.66</td>
<td style="text-align: left;">3.89</td>
<td style="text-align: left;">2.68</td>
<td style="text-align: left;">3.17</td>
<td style="text-align: left;">4.38</td>
</tr>
<tr>
<td style="text-align: left;">Edit</td>
<td style="text-align: left;">4.8</td>
<td style="text-align: left;">4.44</td>
<td style="text-align: left;">3.13</td>
<td style="text-align: left;">3.19</td>
<td style="text-align: left;">7.03</td>
</tr>
<tr>
<td style="text-align: left;">Rename</td>
<td style="text-align: left;">1.29</td>
<td style="text-align: left;">0.66</td>
<td style="text-align: left;">0.65</td>
<td style="text-align: left;">0.47</td>
<td style="text-align: left;">0.77</td>
</tr>
<tr>
<td style="text-align: left;">Query</td>
<td style="text-align: left;">0.73</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.68</td>
<td style="text-align: left;">0.66</td>
</tr>
<tr>
<td style="text-align: left;">Remove</td>
<td style="text-align: left;">0.89</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.62</td>
<td style="text-align: left;">0.41</td>
<td style="text-align: left;">0.70</td>
</tr>
<tr>
<td style="text-align: left;">Overall</td>
<td style="text-align: left;">13.5</td>
<td style="text-align: left;">10.1</td>
<td style="text-align: left;">7.67</td>
<td style="text-align: left;">7.94</td>
<td style="text-align: left;">13.6</td>
</tr>
</tbody>
</table>
<p>Both omx and cmdx thinly wrap the Maya API, so both of their bottlenecks is Maya itself.</p>
<div class="admonition bug">
<p class="admonition-title">Bad performance</p>
<p>The <a href="https://animallogic.github.io/AL_omx/introduction/perf_compare.html">AL performance comparison</a> of <code>cmds</code> ability to create is off by 3x, clocking in at 15 seconds.</p>
</div>
<p><br></p>
<h2 id="deep-dive">Deep Dive</h2>
<p>Let's take a closer look, starting with syntax.</p>
<p><br></p>
<h3 id="syntax">Syntax</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># omx</span>
<span class="n">node</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="c1"># cmdx</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;tx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
</code></pre></div>
<p>This may seem both harmless and subjective, but I found early on that accessing attributes via dot-syntax was unsafe due to naming conflicts.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Attribute, function or property?</span>
<span class="n">node</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">node</span><span class="o">.</span><span class="n">flash</span><span class="o">.</span><span class="n">keyable</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">node</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<p>..did these even exist, or did we just add new variables to the object?</p>
<div class="admonition hint">
<p class="admonition-title">My IDE would tell me</p>
<p>An IDE is not an excuse - consider readers on GitHub, GitLab or BitBucket.</p>
</div>
<p>Whenever you call <code>.something</code> on a node, the <code>__getattribute__</code> method of the object is called. In the case of omx, here's what this looks like.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">XNode</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># (1)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">XNode</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="n">mob</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">)()</span>

        <span class="c1"># (2)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;apiTypeStr&quot;</span><span class="p">:</span>
            <span class="c1"># ...</span>

        <span class="k">if</span> <span class="n">mob</span> <span class="o">==</span> <span class="n">om2</span><span class="o">.</span><span class="n">MObject</span><span class="o">.</span><span class="n">kNullObj</span><span class="p">:</span>
            <span class="c1"># ...</span>

        <span class="n">nodeClass</span> <span class="o">=</span> <span class="n">XNode</span><span class="o">.</span><span class="n">_NODE_CLASS_CACHE</span><span class="p">[</span><span class="n">mayaType</span><span class="p">]</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="n">XNode</span><span class="o">.</span><span class="n">_ATTRIBUTE_CACHE</span><span class="p">[</span><span class="n">mayaType</span><span class="p">]</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># (3)</span>
        <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">nodeClass</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="n">plug</span> <span class="o">=</span> <span class="n">_plugs</span><span class="o">.</span><span class="n">findPlug</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">mob</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">plug</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">_xplug</span><span class="o">.</span><span class="n">XPlug</span><span class="p">(</span><span class="n">plug</span><span class="p">)</span>

                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">mayaType</span><span class="si">}</span><span class="s2"> has no attribute called </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">attr</span> <span class="o">=</span> <span class="n">nodeClass</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">attrs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">attr</span>

        <span class="c1"># (4)</span>
        <span class="k">return</span> <span class="n">_xplug</span><span class="o">.</span><span class="n">XPlug</span><span class="p">(</span><span class="n">mob</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
</code></pre></div>
<p><br></p>
<p><strong>Some highlights</strong></p>
<ol>
<li>First we check if the member is a property or method of the object</li>
<li>If not, we check if you typed <code>node.apiTypeStr</code> in which case we return a special case</li>
<li>Next we check whether the member is a dynamic attribute and return an <code>XPlug</code> if so</li>
<li>Finally we have determined that this is a static attribute and return an <code>XPlug</code></li>
</ol>
<p>Here, attributes are shadowed by native functions and properties, and as the count of both native functions and user attributes increases name clashes are inevitable.</p>
<p>It's also not clear when you assign whether you are assigning to a Python property or Maya attribute.</p>
<div class="highlight"><pre><span></span><code><span class="n">node</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;My Name&quot;</span>
</code></pre></div>
<p>Conversely, cmdx uses <code>__getitem__</code> instead. Here's what happens when you call <code>node["attr"]</code></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">cached</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># (1)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="c1"># ...</span>

        <span class="c1"># (2)</span>
        <span class="k">if</span> <span class="n">cached</span><span class="p">:</span>
            <span class="c1"># ...</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> was not the name of an attribute&quot;</span> <span class="o">%</span> <span class="n">key</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">plug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findPlug</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ExistError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">(),</span> <span class="n">key</span><span class="p">))</span>

        <span class="c1"># (3)</span>
        <span class="k">return</span> <span class="n">Plug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plug</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</code></pre></div>
<p>Some highlights.</p>
<ol>
<li>Optional values as handled, e.g. a non-standard unit <code>node["tx", Meters]</code> or <code>node["rx", Degrees"]</code></li>
<li>Optional cached return value are is fetched</li>
<li>The Maya plug is discovered and wrapped in a <code>cmdx.Plug</code></li>
</ol>
<p><br></p>
<h3 id="undo">Undo</h3>
<p>The first surprise when working with <code>maya.api.OpenMaya</code> is the lack of undo.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>
<span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om</span>
<span class="n">om</span><span class="o">.</span><span class="n">MFnDependencyNode</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>  <span class="c1"># Nope!</span>
</code></pre></div>
<p>We take it for granted with <code>cmds</code> and <code>pymel</code> but with naked access to <code>OpenMaya</code> we are on our own. And it just so happens that undo/redo is (or, can be) <em>really hard</em>.</p>
<p>To understand why, we need to look closer at undo in general, and how Maya implements this with <code>MPxCommand</code> and <code>MDGModifier</code>.</p>
<p><br></p>
<h4 id="undo-primer">Undo Primer</h4>
<p>The basic premise of undo in any application is that for every action there is an equal and opposite reaction. Wait, that's Newtons Third Law. But it does apply!</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">do</span><span class="p">():</span>
    <span class="n">createNode</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">undo</span><span class="p">():</span>
    <span class="n">deleteNode</span><span class="p">()</span>
</code></pre></div>
<p>Maya implements undo via the "<a href="https://gameprogrammingpatterns.com/command.html">Command Pattern</a>". But there are others too, such as the "<a href="https://en.wikipedia.org/wiki/Memento_pattern">Memento Pattern</a>" utilised by Blender.</p>
<blockquote>
<p>Here's an excellent resource on it for deeper diving!
<a href="https://gameprogrammingpatterns.com/command.html">https://gameprogrammingpatterns.com/command.html</a></p>
</blockquote>
<p>In a nutshell, it looks like this.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Command</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="n">createNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">undo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">deleteNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">)</span>
</code></pre></div>
<p>And that's about all there is to it! What makes this pattern work, is that we can keep a list of previous commands..</p>
<div class="highlight"><pre><span></span><code><span class="n">previous_commands</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
    <span class="n">cmd</span><span class="o">.</span><span class="n">do</span><span class="p">()</span>
    <span class="n">previous_commands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="n">execute</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">))</span>
<span class="n">execute</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="s2">&quot;world&quot;</span><span class="p">))</span>
<span class="n">execute</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="s2">&quot;bye&quot;</span><span class="p">))</span>
</code></pre></div>
<p>..and call their <code>undo</code> in the reverse order!</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">undo</span><span class="p">():</span>
    <span class="n">last_command</span> <span class="o">=</span> <span class="n">previous_commands</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># Get and remove last item</span>
    <span class="n">last_command</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>

<span class="n">undo</span><span class="p">()</span>
<span class="n">undo</span><span class="p">()</span>
<span class="n">undo</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>There's one additional list for <code>redo()</code> but the premise is the same. Append and pop.</p>
</blockquote>
<p>Here's a real example of how this is implemented in the Maya Python API 2.0.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># my_command.py</span>
<span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om</span>

<span class="k">class</span> <span class="nc">MyCommand</span><span class="p">(</span><span class="n">om</span><span class="o">.</span><span class="n">MPxCommand</span><span class="p">):</span>
    <span class="n">kPluginCmdName</span> <span class="o">=</span> <span class="s2">&quot;myCommand&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyCommand</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">doIt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redoIt</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Created &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">undoIt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">om</span><span class="o">.</span><span class="n">MGlobal</span><span class="o">.</span><span class="n">deleteNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Deleted &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">redoIt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnDagNode</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Re-created &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">isUndoable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">cmdCreator</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">MyCommand</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">initializePlugin2</span><span class="p">(</span><span class="n">plugin</span><span class="p">):</span>
    <span class="n">pluginFn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnPlugin</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>
    <span class="n">pluginFn</span><span class="o">.</span><span class="n">registerCommand</span><span class="p">(</span><span class="n">MyCommand</span><span class="o">.</span><span class="n">kPluginCmdName</span><span class="p">,</span> <span class="n">MyCommand</span><span class="o">.</span><span class="n">cmdCreator</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">uninitializePlugin2</span><span class="p">(</span><span class="n">plugin</span><span class="p">):</span>
    <span class="n">pluginFn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnPlugin</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>
    <span class="n">pluginFn</span><span class="o">.</span><span class="n">deregisterCommand</span><span class="p">(</span><span class="n">MyCommand</span><span class="o">.</span><span class="n">kPluginCmdName</span><span class="p">)</span>
</code></pre></div>
<p>Apart from a few syntactical differences, this is pretty vanilla Command Pattern.</p>
<p>You can call it like this.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">loadPlugin</span><span class="p">(</span><span class="s2">&quot;my_command.py&quot;</span><span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">myCommand</span><span class="p">()</span>  <span class="c1"># doIt is called</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">redo</span><span class="p">()</span>
<span class="c1"># Created transform1</span>
<span class="c1"># Deleted transform1</span>
<span class="c1"># Re-created transform1</span>
</code></pre></div>
<p>There are however two problems with this approach that make it unsuitable for use in scripting with Python. For starters, we must register each command as a plug-in, and the name of each plug-in must be unique as it will be present in Maya's own <code>maya.cmds</code> module. Secondly, you have to implement the opposite command for every command you do!</p>
<p>Consider the case of an auto rigger.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CreateRig</span><span class="p">(</span><span class="n">om</span><span class="o">.</span><span class="n">MPxCommand</span><span class="p">):</span>
    <span class="n">kPluginCmdName</span> <span class="o">=</span> <span class="s2">&quot;createRig&quot;</span>

    <span class="k">def</span> <span class="nf">doIt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="n">spine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_limb</span><span class="p">()</span>
        <span class="n">left_arm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_limb</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">spine</span><span class="p">)</span>
        <span class="n">right_arm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_limb</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">spine</span><span class="p">)</span>
        <span class="n">left_leg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_limb</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">spine</span><span class="p">)</span>
        <span class="n">right_leg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_limb</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">spine</span><span class="p">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_head</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">spine</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">undoIt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Undo everything we just did!</span>
        <span class="k">pass</span>
</code></pre></div>
<p>Imagine the amount of state you would need to keep track of in order to undo such a thing. No longer just a <code>self._node</code> but many dependent nodes and attributes, that need to be deleted and reset in the proper order (children first) and attributes potentially created on nodes outside of those created by this one command.</p>
<p>You'd have to be pretty dedicated to go this route, even Autodesk (Alias, rather) thought so too, which is why they gave us <strong>the modifier</strong>.</p>
<p><br></p>
<h4 id="modifier-primer">Modifier Primer</h4>
<p>Maya provides a means of wrapping one or more commands into an undoable chunk called a "modifier".</p>
<p>There are 2 flavours.</p>
<ul>
<li><code>MDGModifier</code> for DG related modifications</li>
<li><code>MDagModifier</code> for DAG related modifications</li>
</ul>
<p>The DG handles things like creating DG nodes, connecting things, renaming things. Whereas the DAG version handles parenting and creating DAG nodes.</p>
<div class="highlight"><pre><span></span><code><span class="n">mod</span> <span class="o">=</span> <span class="n">maya</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">OpenMaya</span><span class="o">.</span><span class="n">MDagModifier</span><span class="p">()</span>
<span class="n">node1</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hello1&quot;</span><span class="p">)</span>
<span class="n">node2</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;hello2&quot;</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>
</code></pre></div>
<p>Points of interest:</p>
<ul>
<li>Nothing happens until <code>doIt</code> is called</li>
<li>Not every possible command is accessible via <code>MDagModifier</code><ul>
<li>Such as changing the keyable state of an attribute</li>
<li>Such as changing the min and max of a float</li>
<li>Such as playing or pausing the Maya timeline</li>
<li>Such as interacting with Maya's UI in any way</li>
</ul>
</li>
</ul>
<p>But this <em>still</em> doesn't grant you the ability to undo. Instead, you have:</p>
<div class="highlight"><pre><span></span><code><span class="n">mod</span><span class="o">.</span><span class="n">undoIt</span><span class="p">()</span>
</code></pre></div>
<p>Which has nothing to do with undo you know - i.e. Ctrl + Z - it's merely a command you can call yourself do <em>undo</em> whatever was done up until <code>doIt</code>. The modifier has been keeping a log of every command you've done, so as to perform the opposite in the same order as you did. So to incorporate this with what you know as undo you need one more ingredient, the command.</p>
<p>Here's one way to couple the modifier and command.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyUndoCommand</span><span class="p">(</span><span class="n">maya</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">OpenMaya</span><span class="o">.</span><span class="n">MPxCommand</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modifier</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">doIt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modifier</span> <span class="o">=</span> <span class="n">_GLOBAL_MODIFIER</span>
        <span class="n">_GLOBAL_MODIFIER</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">undoIt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modifier</span><span class="o">.</span><span class="n">undoIt</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">redoIt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modifier</span><span class="o">.</span><span class="n">redoIt</span><span class="p">()</span>
</code></pre></div>
<p>Maya will create an instance of this command and store it, so by storing the last modifier inside of it, Maya will ensure the right modifier is called at the right time.</p>
<p>Aside from some minutia, this is how both cmdx and omx solves this problem.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">AL</span> <span class="kn">import</span> <span class="n">omx</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">XModifier</span><span class="p">(</span><span class="n">immediate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">createDagNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">AL_OMXCommand</span><span class="p">()</span>  <span class="c1"># Fetch and store this latest modifier</span>

<span class="kn">import</span> <span class="nn">cmdx</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span>
<span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">cmdx_0_6_3_command</span><span class="p">()</span>
</code></pre></div>
<p>And in both cases, this command is hidden from view and is automatically called.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">AL</span> <span class="kn">import</span> <span class="n">omx</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">XModifier</span><span class="p">(</span><span class="n">immediate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">createDagNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">cmdx</span>
<span class="k">with</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span> <span class="k">as</span> <span class="n">mod</span><span class="p">:</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
</code></pre></div>
<p><br></p>
<h3 id="modifiers">Modifiers</h3>
<p>Given what we now know, you might be thinking "modifiers, where have you been all my life!?". And it's true they provide something rather unique, but they can be both a blessing and a curse.</p>
<p><br></p>
<h4 id="blessing">Blessing</h4>
<p>Since nothing happens until you call <code>doIt()</code> that also means that if anything goes wrong up until that point, your Maya scene will be unaffected by anything that preceeded it.</p>
<div class="highlight"><pre><span></span><code><span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;condition&quot;</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">addAttr</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;BAD&quot;</span><span class="p">)</span>  <span class="c1"># &lt;---</span>
<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>
</code></pre></div>
<p>With MEL, cmds and Pymel, the above would produce an error and leave your scene is a dirty state. As a user, you never know what has been created and what has not; was it enough to carry on? Do you need to undo and try again? Can you even undo, or has the undo queue been disrupted already?</p>
<p>With a modifier, an error is produced..</p>
<div class="highlight"><pre><span></span><code><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;C:\github</span><span class="se">\t</span><span class="s2">est.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">8</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;BAD&quot;</span><span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">node</span> <span class="nb">type</span>
</code></pre></div>
<p>..and since <code>doIt()</code> was never called nothing will have happened! This is very nice.</p>
<p>Consider the case of an auto-rigger, where multiple functions and multiple modules call on each other to produce the final result. If anything breaks, an error is produced and nothing will have changed.</p>
<p><br></p>
<h4 id="curse">Curse</h4>
<p>There are however 2 main drawbacks to this approach.</p>
<ol>
<li>Source of error is hard to spot</li>
<li>Not every command is available via a modifier</li>
</ol>
<p>(2) means that there are things you cannot do with a modifier, and thus cannot capture their undo. For example, you cannot <code>cmds.play()</code> and you cannot manipulate the Maya UI in any way and you cannot change the min and max of attributes.</p>
<p>(1) however is the most damning.</p>
<p>Consider the case of a real-world production project, 15 modules, 150 functions, thousands of calls to generate a character rig. Creating nodes, adding and connecting attributes, setting values; the works.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MDagModifier</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>

<span class="n">fn1</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnDependencyNode</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">plug1</span> <span class="o">=</span> <span class="n">fn1</span><span class="o">.</span><span class="n">findPlug</span><span class="p">(</span><span class="s2">&quot;tx&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">plug2</span> <span class="o">=</span> <span class="n">fn1</span><span class="o">.</span><span class="n">findPlug</span><span class="p">(</span><span class="s2">&quot;rx&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">plug3</span> <span class="o">=</span> <span class="n">fn1</span><span class="o">.</span><span class="n">findPlug</span><span class="p">(</span><span class="s2">&quot;sx&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

<span class="c1"># Locked attributes cannot be connected</span>
<span class="n">plug2</span><span class="o">.</span><span class="n">isLocked</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">mod</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">plug1</span><span class="p">,</span> <span class="n">plug2</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">plug2</span><span class="p">,</span> <span class="n">plug3</span><span class="p">)</span>

<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>
</code></pre></div>
<p>And then, an error is thrown. Here's what you'll see.</p>
<div class="highlight"><pre><span></span><code><span class="n">Error</span><span class="p">:</span> <span class="n">Connection</span> <span class="ow">not</span> <span class="n">made</span><span class="p">:</span> <span class="s1">&#39;unitConversion1.output&#39;</span> <span class="o">-&gt;</span> <span class="s1">&#39;transform2.rotateX&#39;</span><span class="o">.</span>  <span class="n">Destination</span> <span class="ow">is</span> <span class="n">locked</span><span class="o">.</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;example.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">18</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>
<span class="ne">RuntimeError</span><span class="p">:</span> <span class="p">(</span><span class="n">kFailure</span><span class="p">):</span> <span class="n">Unexpected</span> <span class="n">Internal</span> <span class="n">Failure</span>
</code></pre></div>
<p>And here's the kicker; the error occurs at line 18. At <code>mod.doIt()</code>.</p>
<p>In this example - with only 1 call to <code>connect</code> - the source is obvious. But you can already see how <code>unitConversion1.output</code> is not what you wrote. It's automatically created by the modifier, and is part of the error message. In this hypotethical production example, these errors can start to get near impossible to debug.</p>
<p>Other times, you won't get an error at all until it's too late.</p>
<p><br></p>
<h4 id="silently-adding-duplicate-attributes">Silently adding duplicate attributes</h4>
<div class="highlight"><pre><span></span><code><span class="n">mod</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MDGModifier</span><span class="p">()</span>
<span class="n">node1</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;multMatrix&quot;</span><span class="p">)</span>

<span class="n">fn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnNumericAttribute</span><span class="p">()</span>
<span class="n">attr1</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;myAttr&quot;</span><span class="p">,</span> <span class="s2">&quot;at&quot;</span><span class="p">,</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnNumericData</span><span class="o">.</span><span class="n">kFloat</span><span class="p">)</span>
<span class="n">attr2</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;myAttr&quot;</span><span class="p">,</span> <span class="s2">&quot;at&quot;</span><span class="p">,</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnNumericData</span><span class="o">.</span><span class="n">kDouble</span><span class="p">)</span>

<span class="n">mod</span><span class="o">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="n">node1</span><span class="p">,</span> <span class="n">attr1</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="n">node1</span><span class="p">,</span> <span class="n">attr2</span><span class="p">)</span>

<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>
<span class="c1"># No error</span>
</code></pre></div>
<p>Now you're left with 2 duplicate attributes. This is not allowed by the Maya API and will likely segfault if you try and operate on either of these once they are done.</p>
<p>Under normal, non-modifier circumstances, an error would occur when attempting to add an attribute that already exists.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">maya</span> <span class="kn">import</span> <span class="n">cmds</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">addAttr</span><span class="p">(</span><span class="s2">&quot;persp&quot;</span><span class="p">,</span> <span class="n">ln</span><span class="o">=</span><span class="s2">&quot;myAttr&quot;</span><span class="p">,</span> <span class="n">at</span><span class="o">=</span><span class="s2">&quot;float&quot;</span><span class="p">)</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">addAttr</span><span class="p">(</span><span class="s2">&quot;persp&quot;</span><span class="p">,</span> <span class="n">ln</span><span class="o">=</span><span class="s2">&quot;myAttr&quot;</span><span class="p">,</span> <span class="n">at</span><span class="o">=</span><span class="s2">&quot;double&quot;</span><span class="p">)</span>
<span class="c1"># Warning: Name &#39;myAttr&#39; of new attribute clashes with an existing attribute of node &#39;persp&#39;.</span>
<span class="c1"># Traceback (most recent call last):</span>
<span class="c1">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="c1"># RuntimeError: Found no valid items to add the attribute to.</span>
</code></pre></div>
<p><br></p>
<h4 id="interoperability-with-non-modifiers">Interoperability with non-modifiers</h4>
<p>Modifiers know about the surrounding API, but the surrounding API does not know about modifiers.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MDagModifier</span><span class="p">()</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>

<span class="c1"># (1)</span>
<span class="n">fn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnNumericAttribute</span><span class="p">()</span>
<span class="n">length</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="s2">&quot;le&quot;</span><span class="p">,</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnNumericData</span><span class="o">.</span><span class="n">kFloat</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

<span class="c1"># (2)</span>
<span class="n">fn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnDependencyNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="n">plug</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">findPlug</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">newPlugValueFloat</span><span class="p">(</span><span class="n">plug</span><span class="p">,</span> <span class="mf">5.3</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">plug</span><span class="o">.</span><span class="n">asFloat</span><span class="p">())</span>
</code></pre></div>
<p>In this case, (1) is a modifier given data created outside of the modifier, this is fine.</p>
<p>But at (2), a non-modifier is operating on modifier data; this won't work because the data has not yet been created. We haven't yet called <code>doIt()</code>. Neither the attribute nor node exists yet. The <code>MObject</code> passed to <code>MFnDependencyNode</code> is essentially invalid.</p>
<p>We can work around this by calling <code>doIt()</code> multiple times.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MDagModifier</span><span class="p">()</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>

<span class="c1"># (1)</span>
<span class="n">fn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnNumericAttribute</span><span class="p">()</span>
<span class="n">length</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="s2">&quot;le&quot;</span><span class="p">,</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnNumericData</span><span class="o">.</span><span class="n">kFloat</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>  <span class="c1"># Prepare attribute for the below call</span>

<span class="c1"># (2)</span>
<span class="n">fn</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">MFnDependencyNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="n">plug</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">findPlug</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">newPlugValueFloat</span><span class="p">(</span><span class="n">plug</span><span class="p">,</span> <span class="mf">5.3</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>  <span class="c1"># Again prepare the the *next* call</span>

<span class="nb">print</span><span class="p">(</span><span class="n">plug</span><span class="o">.</span><span class="n">asFloat</span><span class="p">())</span>
</code></pre></div>
<p>Each time <code>doIt()</code> is called, it will only perform the newly created operations since the last <code>doIt()</code>. The <code>undoIt()</code> on the other hand will undo <em>all</em> operations. Just as one would expect.</p>
<p><br></p>
<h4 id="armour">Armour</h4>
<p>Both <code>omx</code> and <code>cmdx</code> had the same brilliant idea of recording commands made with the modifier, such that they can be printed out on error. Something Maya really should be doing already.</p>
<div class="highlight"><pre><span></span><code><span class="n">node</span><span class="p">[</span><span class="s2">&quot;rx&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>

<span class="k">with</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span> <span class="k">as</span> <span class="n">mod</span><span class="p">:</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="s2">&quot;tx&quot;</span><span class="p">],</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;rx&quot;</span><span class="p">])</span>

<span class="c1"># cmdx.ModifierError: An unexpected internal failure occurred, these tasks were attempted:</span>
<span class="c1"># - connect(&#39;|transform1.translateX&#39;, &#39;|transform1.rotateX&#39;)</span>
<span class="c1"># - connect(&#39;|transform1.rotateX&#39;, &#39;|transform1.scaleX&#39;)</span>
</code></pre></div>
<p><code>cmdx</code> incorporates common sources of error into the modifier, so the above for example would error immediately.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># cmdx.LockedError: Channel locked, cannot connect &#39;rotateX&#39;</span>
</code></pre></div>
<p><br></p>
<h2 id="comparison">Comparison</h2>
<p>Let's compare the use of modifiers and commands between cmdx and omx.</p>
<p><br></p>
<h3 id="mdgmodifier">MDGModifier</h3>
<p>Let's look at how users interface with modifiers through cmdx and omx.</p>
<p><strong>omx</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">omx</span>
<span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om2</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">currentModifier</span><span class="p">()</span>
<span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">addAttribute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Current modifier implicitly called</span>
<span class="n">joint</span><span class="o">.</span><span class="n">radius</span><span class="o">.</span><span class="n">setFloat</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">mod</span><span class="o">.</span><span class="n">commandToExecute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">mod</span><span class="o">.</span><span class="n">doIt</span><span class="p">()</span>
</code></pre></div>
<p><strong>cmdx</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">cmdx</span>

<span class="k">with</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span> <span class="k">as</span> <span class="n">mod</span><span class="p">:</span>
    <span class="n">joint</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">addAttr</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>When I first started writing <code>cmdx</code> I desperately wanted to avoid exposing the modifier directly, as it added another layer of complexity compared to <code>cmds</code> and <code>PyMEL</code>. By having a "current" modifier somewhere globally accessible, you can make naked calls like <code>joint.radius.setFloat</code> take advantage of it without the user explicitly calling on it.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># omx/_xplug.py:119</span>
<span class="k">def</span> <span class="nf">setFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">_currentModifier</span><span class="p">()</span><span class="o">.</span><span class="n">newPlugValueFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p>The problem is that it was never clear which call made use of this global modifier and which did not.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># We know this does</span>
<span class="n">joint</span><span class="o">.</span><span class="n">radius</span><span class="o">.</span><span class="n">setFloat</span><span class="p">(</span><span class="mf">3.5</span><span class="p">)</span>

<span class="c1"># But how about this?</span>
<span class="n">joint</span><span class="o">.</span><span class="n">myArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># ..and this?</span>
<span class="n">joint</span><span class="o">.</span><span class="n">tx</span><span class="o">.</span><span class="n">locked</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># hmm..</span>
<span class="n">joint</span><span class="o">.</span><span class="n">visibility</span><span class="o">.</span><span class="n">setDoNotWrite</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<p>With <code>cmdx</code>, all undoable things are encapsulated in the modifier. Things outside of it are not immediately undoable.</p>
<div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span> <span class="k">as</span> <span class="n">mod</span><span class="p">:</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># Undoable</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">addAttr</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>     <span class="c1"># Undoable</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>     <span class="c1"># Undoable</span>

<span class="n">node</span><span class="p">[</span><span class="s2">&quot;myArray&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <span class="c1"># Not undoable</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;attr&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">storable</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Not undoable</span>
</code></pre></div>
<p>For hand-rolled undoable operations, there is <code>cmdx.commit</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">cmdx</span>

<span class="n">history</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmdx</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">))</span>
<span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmdx</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;condition&quot;</span><span class="p">))</span>
<span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmdx</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;multMatrix&quot;</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">undo</span><span class="p">():</span>
    <span class="n">cmdx</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>

<span class="n">cmdx</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="n">undo</span><span class="p">)</span>
</code></pre></div>
<p>Which is what <code>cmdx.DagModifier</code> uses too.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Modifier</span><span class="p">:</span>
    <span class="c1"># ...</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
        <span class="n">cmdx</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">undoIt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">redoIt</span><span class="p">)</span>
</code></pre></div>
<p>Although in practice I have never had to use this in Ragdoll.</p>
<p><br></p>
<h3 id="mpxcommand">MPxCommand</h3>
<p>Another subtle difference between omx and cmdx is how they store their modifiers.</p>
<p><strong>omx</strong></p>
<blockquote>
<p><a href="https://github.com/AnimalLogic/AL_omx/blob/24cf525e596a6d12e21417c791b1d76a8130d942/AL/omx/_xcommand.py#L40">_xcommand.py#L40</a></p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align: left;">Highlight</th>
<th style="text-align: left;">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Implicit list of modifiers</td>
<td style="text-align: left;">There exists this notion of a "current" modifier, and apparently there can be many. They are stored together in the same command.</td>
</tr>
<tr>
<td style="text-align: left;">Instances</td>
<td style="text-align: left;">Modifier instances themselves are stored alongside the command. Potentially problematic given that one cannot inspect what commands are in Maya's undo buffer at any given time and thus cannot confirm they do what you expect.</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">getAndClearModifierStack</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">_CURRENT_MODIFIER_LIST</span>
    <span class="n">existingMods</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">xmod</span> <span class="ow">in</span> <span class="n">_CURRENT_MODIFIER_LIST</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">xmod</span><span class="p">,</span> <span class="n">XModifier</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">xmod</span><span class="o">.</span><span class="n">isClean</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="n">mmod</span> <span class="o">=</span> <span class="n">xmod</span><span class="o">.</span><span class="n">_modifier</span>  <span class="c1"># NOQA</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mmod</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Retrieving mod </span><span class="si">%r</span><span class="s2"> from list for execution&quot;</span><span class="p">,</span> <span class="n">mmod</span><span class="p">)</span>
        <span class="n">existingMods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">DoItModifierWrapper</span><span class="p">(</span><span class="n">xmod</span><span class="p">,</span> <span class="n">mmod</span><span class="p">))</span>
    <span class="n">_CURRENT_MODIFIER_LIST</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="n">existingMods</span>

<span class="k">class</span> <span class="nc">XCommand</span><span class="p">(</span><span class="n">om2</span><span class="o">.</span><span class="n">MPxCommand</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modifiers</span> <span class="o">=</span> <span class="n">_xmodifier</span><span class="o">.</span><span class="n">getAndClearModifierStack</span><span class="p">()</span>

<span class="n">cmds</span><span class="o">.</span><span class="n">AL_OMXCommand</span><span class="p">()</span>
</code></pre></div>
<p><strong>cmdx</strong></p>
<p>The <code>undo</code> and <code>redo</code> commands are stored in a shared location, accessible to both the <code>cmdx</code> module and plug-ins made with <code>cmdx</code>.</p>
<blockquote>
<p><a href="https://github.com/mottosso/cmdx/blob/ddf276a9e7c3f8ee242fd293e797b01cf3cd7e6a/cmdx.py#L8407">cmdx.py#L8407</a></p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align: left;">Highlight</th>
<th style="text-align: left;">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>unique_command</code></td>
<td style="text-align: left;">cmdx supports vendoring, whereby there may be multiple instances of <code>cmdx</code> on the <code>sys.path</code> any given time, of different versions. Therefore, they each use a unique name for their command.</td>
</tr>
<tr>
<td style="text-align: left;">Addresses</td>
<td style="text-align: left;">Undo and redo addresses are stored in a shared memory location, accessible from outside of Maya's undo queue for inspection, along with inside of new Maya commands made with <code>cmdx</code>.</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">_apiUndo</span><span class="p">(</span><span class="n">om</span><span class="o">.</span><span class="n">MPxCommand</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">doIt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">undoId</span> <span class="o">=</span> <span class="n">shared</span><span class="o">.</span><span class="n">undoId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redoId</span> <span class="o">=</span> <span class="n">shared</span><span class="o">.</span><span class="n">redoId</span>

<span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="n">undo</span><span class="p">,</span> <span class="n">redo</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">shared</span><span class="o">.</span><span class="n">undoId</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">id</span><span class="p">(</span><span class="n">undo</span><span class="p">)</span>
    <span class="n">shared</span><span class="o">.</span><span class="n">redoId</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">id</span><span class="p">(</span><span class="n">redo</span><span class="p">)</span>
    <span class="n">shared</span><span class="o">.</span><span class="n">undos</span><span class="p">[</span><span class="n">shared</span><span class="o">.</span><span class="n">undoId</span><span class="p">]</span> <span class="o">=</span> <span class="n">undo</span>
    <span class="n">shared</span><span class="o">.</span><span class="n">redos</span><span class="p">[</span><span class="n">shared</span><span class="o">.</span><span class="n">redoId</span><span class="p">]</span> <span class="o">=</span> <span class="n">redo</span>

    <span class="nb">getattr</span><span class="p">(</span><span class="n">cmds</span><span class="p">,</span> <span class="n">unique_command</span><span class="p">)()</span>
</code></pre></div>
<p>To the end user, the behavious is identical. There really only is 1 way to undo and redo, anything else is a bug.</p>
<p><br></p>
<h2 id="omx-and-the-current-modifier">omx and the "Current Modifier"</h2>
<p>Given what we know know about undo inside of Maya, with modifiers and commands, it was interesting to see the notion of a "current" modifier in <code>omx</code>.</p>
<p>Consider this.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># module1.py</span>
<span class="k">def</span> <span class="nf">function1</span><span class="p">():</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">currentModifier</span><span class="p">()</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># module2.py</span>
<span class="k">def</span> <span class="nf">function2</span><span class="p">():</span>
    <span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">currentModifier</span><span class="p">()</span>
    <span class="n">mod</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p>To the naked eye, both of these functions, in these two separate Python modules, call on the same "current" modifier. In which case, by the end of your multi-file, multi-function call you must be incredibly lucky to not have encountered a single error - user or otherwise - for the function to have executed perfectly and without error. Only then will you get undo and only then will your scene state be safe. Because yes - as opposed to errors occurring prior to calling <code>doIt()</code> - modifiers will still have executed all commands prior to the one that failed, leaving you with a mess and <em>no undo</em>.</p>
<p>But having looked closer at the omx source code, this is not the case. Instead, <code>doIt</code> is frequently called automatically - such as when both creating and deleting new nodes - leaving me wondering what the purpose of a "current" modifier is, given that there is also a <code>omx.newModifier()</code>?</p>
<p>cmdx deals with this by encouraging small batches of modifiers.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">function1</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span> <span class="k">as</span> <span class="n">mod</span><span class="p">:</span>
        <span class="n">mod</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">function2</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">DagModifier</span><span class="p">()</span> <span class="k">as</span> <span class="n">mod</span><span class="p">:</span>
        <span class="n">mod</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>
<p><br></p>
<h3 id="xmodifier-implementation">XModifier Implementation</h3>
<p>omx provides:</p>
<ul>
<li><code>omx.newModifier()</code></li>
<li><code>omx.currentModifier()</code></li>
</ul>
<p>Whereby <code>currentModifier</code> will create a new modifier if there is no modifier. I was expecting this to keep returning the same modifier until I call <code>newModifier</code>, but this wasn't the case.</p>
<div class="highlight"><pre><span></span><code><span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">currentModifier</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">mod</span> <span class="ow">is</span> <span class="n">omx</span><span class="o">.</span><span class="n">currentModifier</span><span class="p">()</span>
<span class="n">mod</span><span class="o">.</span><span class="n">createDagNode</span><span class="p">(</span><span class="s2">&quot;joint&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">mod</span> <span class="ow">is</span> <span class="n">omx</span><span class="o">.</span><span class="n">currentModifier</span><span class="p">()</span>  <span class="c1"># AssertionError</span>
</code></pre></div>
<p>Furthermore, the documentation states:</p>
<blockquote>
<p>If <code>AL.omx.XModifier._immediate</code> is True, whenever you call its method to edit Maya’s scene data, it will call <code>doIt()</code> to apply the edit to the scene immediately. On the other hand, if <code>AL.omx.XModifier._immediate</code> is False, then you’ll have to manually call <code>AL.omx.doIt()</code> or <code>XModifier.doIt()</code> to apply the edit.</p>
</blockquote>
<p>However this does not appear true.</p>
<div class="highlight"><pre><span></span><code><span class="n">mod</span> <span class="o">=</span> <span class="n">omx</span><span class="o">.</span><span class="n">XModifier</span><span class="p">(</span><span class="n">immediate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">mod</span><span class="o">.</span><span class="n">_immediate</span>
<span class="n">mod</span><span class="o">.</span><span class="n">createDagNode</span><span class="p">(</span><span class="s2">&quot;joint&quot;</span><span class="p">)</span>  <span class="c1"># Still creates the joint</span>
<span class="c1"># mod.doIt()</span>
</code></pre></div>
<p>There is a comment in the source explaining why.</p>
<blockquote>
<p>"To get a valid MObjectHandle in XNode the creation needs to happen right away" - <a href="https://github.com/AnimalLogic/AL_omx/blob/24cf525e596a6d12e21417c791b1d76a8130d942/AL/omx/_xmodifier.py#L664">Source</a></p>
</blockquote>
<p><br></p>
<h2 id="extras">Extras</h2>
<p>Let's highlight some other points of interest.</p>
<p><br></p>
<h3 id="commandtoexecute">commandToExecute</h3>
<p>One of the things I struggled with was incorporating non-modifier commands in a modifier context, like locking attributes.</p>
<p><code>omx</code> handles this by utilising <code>MDGModifier.commandToExecute</code> which queues a (MEL) command to execute at the right time, which I thought was very nice.</p>
<p><strong>omx</strong></p>
<p>Elegant method of handling this scenario.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Modifier</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">setLocked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locked</span><span class="p">):</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;setAttr -locked </span><span class="si">{</span><span class="n">locked</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">_currentModifier</span><span class="p">()</span><span class="o">.</span><span class="n">commandToExecute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</code></pre></div>
<p>There is also <code>pythonCommandToExecute</code> which does the same but with a Python command instead.</p>
<p><strong>cmdx</strong></p>
<p>Manual way, which will likely be converted to <code>pythonCommandToExecute</code> instead.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Modifier</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">setLocked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plug</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lockAttrs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">plug</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_doLockAttrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lockAttrs</span><span class="p">:</span>
            <span class="n">plug</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lockAttrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">elements</span> <span class="o">=</span> <span class="n">plug</span> <span class="k">if</span> <span class="n">plug</span><span class="o">.</span><span class="n">isArray</span> <span class="ow">or</span> <span class="n">plug</span><span class="o">.</span><span class="n">isCompound</span> <span class="k">else</span> <span class="p">[</span><span class="n">plug</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
                <span class="n">cmds</span><span class="o">.</span><span class="n">setAttr</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">path</span><span class="p">(),</span> <span class="n">lock</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redoIt</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_doLockAttrs</span><span class="p">()</span>
</code></pre></div>
<p><br></p>
<h3 id="animation">Animation</h3>
<p>Shorthand for animating values.</p>
<div class="highlight"><pre><span></span><code><span class="n">node</span> <span class="o">=</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;tx&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="mi">5</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="mi">10</span><span class="p">:</span> <span class="mf">0.0</span>
<span class="p">}</span>
</code></pre></div>
<p>This sets keyframes on frames 1, 5 and 10, with values 0, 1 and 0 respectively.</p>
<ul>
<li>Read more: <a href="https://github.com/mottosso/cmdx?tab=readme-ov-file#animation">https://github.com/mottosso/cmdx?tab=readme-ov-file#animation</a></li>
</ul>
<p><br></p>
<h3 id="units">Units</h3>
<p>It might surprise you to know that <code>cmds</code> returns units relative the units your UI is configured to.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># cm, meters or feet?</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">getAttr</span><span class="p">(</span><span class="s2">&quot;persp.ty&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Which is convenient sometimes, but not often!</p>
<p><code>cmdx</code> on the other hand always returns <code>cm</code> and <code>radians</code>, unless you specify otherwide.</p>
<div class="highlight"><pre><span></span><code><span class="n">height</span> <span class="o">=</span> <span class="n">persp</span><span class="p">[</span><span class="s2">&quot;ty&quot;</span><span class="p">,</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">Centimeters</span><span class="p">]</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">persp</span><span class="p">[</span><span class="s2">&quot;ty&quot;</span><span class="p">,</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">Meters</span><span class="p">]</span>
</code></pre></div>
<ul>
<li>Read more: <a href="https://github.com/mottosso/cmdx?tab=readme-ov-file#units">https://github.com/mottosso/cmdx?tab=readme-ov-file#units</a></li>
</ul>
<p><br></p>
<h3 id="math">Math</h3>
<p>All of the Maya math classes are available via <code>cmdx</code> and may be directly passed (and gotten) as attribute values.</p>
<div class="highlight"><pre><span></span><code><span class="n">node</span> <span class="o">=</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;ty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">mtx</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;worldMatrix&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span>

<span class="c1"># Store Y-transform as offset</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;offsetParentMatrix&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtx</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;ty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Do some math</span>
<span class="n">mtx_inverse</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="s2">&quot;worldMatrix&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_matrix_inverse</span><span class="p">()</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;newAttr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">MatrixType</span><span class="p">()</span>
<span class="n">node</span><span class="p">[</span><span class="s2">&quot;newAttr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtx</span> <span class="o">*</span> <span class="n">mtx_inverse</span>
</code></pre></div>
<ul>
<li>Read more: <a href="https://github.com/mottosso/cmdx?tab=readme-ov-file#native-types">https://github.com/mottosso/cmdx?tab=readme-ov-file#native-types</a></li>
</ul>
<p><br></p>
<h3 id="pep8">PEP8</h3>
<p>All of <code>cmdx</code> is available both as Maya-standard camelCase but also as <code>camel_case</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">cmdx</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">cmdx</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
</code></pre></div>
<p>As such, it'll fit into any codebase, no matter the convention!</p>
<p>Under the hood, the members are simply aliases of each other, so the functionality remains the same.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">createNode</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># Alias</span>
<span class="n">create_node</span> <span class="o">=</span> <span class="n">createNode</span>
</code></pre></div>
<ul>
<li>Read more: <a href="https://github.com/mottosso/cmdx?tab=readme-ov-file#pep8-dual-syntax">https://github.com/mottosso/cmdx?tab=readme-ov-file#pep8-dual-syntax</a></li>
</ul>
<p><Br></p>
<h3 id="generate-curves">Generate Curves</h3>
<p>Generate curves with a lot less code than the Maya API!</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">cmdx</span>

<span class="n">parent</span> <span class="o">=</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">)</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">cmdx</span><span class="o">.</span><span class="n">curve</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>  <span class="c1"># first CV point</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>  <span class="c1"># second CV point</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>  <span class="c1"># ...</span>
<span class="p">])</span>
</code></pre></div>
<ul>
<li>Read more: <a href="https://github.com/mottosso/cmdx?tab=readme-ov-file#geometry-types">https://github.com/mottosso/cmdx?tab=readme-ov-file#geometry-types</a></li>
</ul>
<p><br></p>
<h3 id="cmdc">cmdc</h3>
<p>Have a look at the little brother of cmdx called <code>cmdc</code>, a complete re-implementation of Maya's API, a.k.a. "Maya Python API 3.0"</p>
<ul>
<li><a href="https://github.com/mottosso/cmdc">https://github.com/mottosso/cmdc</a></li>
</ul>
<p><br></p>
<h3 id="more">More</h3>
<p>Read more about cmdx and the tons of quality-of-life features incorporated over the years here.</p>
<ul>
<li><a href="https://github.com/mottosso/cmdx">https://github.com/mottosso/cmdx</a></li>
</ul>
<p><br></p>
<h2 id="feedback">Feedback</h2>
<p>Let me know what you think of the above summary! You can reach me at <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#97;&#114;&#99;&#117;&#115;&#64;&#114;&#97;&#103;&#100;&#111;&#108;&#108;&#100;&#121;&#110;&#97;&#109;&#105;&#99;&#115;&#46;&#99;&#111;&#109;">&#109;&#97;&#114;&#99;&#117;&#115;&#64;&#114;&#97;&#103;&#100;&#111;&#108;&#108;&#100;&#121;&#110;&#97;&#109;&#105;&#99;&#115;&#46;&#99;&#111;&#109;</a> or via the <a href="https://forums.ragdolldynamics.com">Ragdoll forums</a>. The post is intended for Maya developers at large, but also the developers of omx and anyone using omx or cmdx with a desire to better understand the things it does for you, under that hood.</p>
<p><br></p>
<h3 id="try-it">Try it</h3>
<p>That's all I got! Take both cmdx and omx for a spin via pip.</p>
<div class="highlight"><pre><span></span><code>mayapy<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>AL_omx
mayapy<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>cmdx
</code></pre></div>
<ul>
<li><a href="https://pypi.org/project/cmdx">https://pypi.org/project/cmdx</a></li>
<li><a href="https://pypi.org/project/AL-omx">https://pypi.org/project/AL-omx</a></li>
</ul>
<p><br></p>
<h3 id="read-more">Read more</h3>
<p>There's a topic created in the omx repository with some more discussion.</p>
<ul>
<li><a href="https://github.com/AnimalLogic/AL_omx/issues/3">https://github.com/AnimalLogic/AL_omx/issues/3</a></li>
</ul>
                
                  
                
              

              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020-2022 mottosso
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="../../extra.js"></script>
      
    
  </body>
</html>